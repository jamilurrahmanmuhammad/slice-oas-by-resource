openapi: "3.0.3"
info:
  title: "Header Reference Test API"
  version: "1.0.0"
  description: "Test fixture for header $ref resolution"
paths:
  /resources:
    get:
      summary: "Get resources with rate limit headers"
      operationId: getResources
      responses:
        "200":
          description: "Success response with headers"
          headers:
            X-Rate-Limit:
              $ref: "#/components/headers/X-Rate-Limit"
            X-Rate-Limit-Remaining:
              $ref: "#/components/headers/X-Rate-Limit-Remaining"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Resource"
        "429":
          description: "Rate limited"
          headers:
            Retry-After:
              $ref: "#/components/headers/Retry-After"
components:
  headers:
    X-Rate-Limit:
      description: "Maximum requests per hour"
      schema:
        type: integer
        example: 1000
    X-Rate-Limit-Remaining:
      description: "Remaining requests in window"
      schema:
        type: integer
        example: 999
    Retry-After:
      description: "Seconds to wait before retry"
      schema:
        $ref: "#/components/schemas/RetrySeconds"
  schemas:
    Resource:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
    RetrySeconds:
      type: integer
      minimum: 0
      description: "Number of seconds to wait"
